<div class="container my-5" ng-controller="checkoutCtrl">

    <h3 class="mb-4">üí≥ Thanh to√°n</h3>

    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm p-3">
                <h5 class="mb-3">Th√¥ng tin kh√°ch h√†ng</h5>
                <div class="mb-2">
                    <label class="form-label">H·ªç v√† t√™n:</label>
                    <input type="text" class="form-control" ng-model="khachHang.ten" readonly>
                </div>
                <div class="mb-2">
                    <label class="form-label">Email:</label>
                    <input type="email" class="form-control" ng-model="khachHang.email" readonly>
                </div>
                <div class="mb-2">
                    <label class="form-label">S·ªë ƒëi·ªán tho·∫°i:</label>
                    <input type="text" class="form-control" ng-model="khachHang.sdt" readonly>
                </div>

                <hr>

                <h5 class="mb-3">ƒê·ªãa ch·ªâ giao h√†ng</h5>
                <select class="form-select"
                        ng-model="diaChi.tinh"
                        ng-options="t as t.name for t in listTinh"
                        ng-change="loadHuyen(diaChi.tinh)">
                    <option value="">-- Ch·ªçn T·ªânh/Th√†nh ph·ªë --</option>
                </select>

                <div class="mb-2">
                    <label class="form-label">Huy·ªán/Qu·∫≠n</label>
                    <select class="form-select" ng-model="diaChi.huyen" ng-change="loadXa(diaChi.huyen)">
                        <option value="">-- Ch·ªçn Huy·ªán/Qu·∫≠n --</option>
                        <option ng-repeat="h in listHuyen" ng-value="h">{{h.name}}</option>
                    </select>
                </div>

                <div class="mb-2">
                    <label class="form-label">X√£/Ph∆∞·ªùng</label>
                    <select class="form-select" ng-model="diaChi.xa">
                        <option value="">-- Ch·ªçn X√£/Ph∆∞·ªùng --</option>
                        <option ng-repeat="x in listXa" ng-value="x">{{x.name}}</option>
                    </select>
                </div>

                <div class="mb-2">
                    <label class="form-label">ƒê·ªãa ch·ªâ chi ti·∫øt</label>
                    <input type="text" class="form-control" ng-model="diaChi.chiTiet" placeholder="S·ªë nh√†, ƒë∆∞·ªùng...">
                </div>

                <div class="mt-3">
                    <label>ƒê·ªãa ch·ªâ ƒë·∫ßy ƒë·ªß:</label>
                    <div class="fw-bold">{{getDiaChiDayDu()}}</div>
                </div>


                <div class="mt-3">
                    <label>Ph√≠ v·∫≠n chuy·ªÉn:</label>
                    <div class="fw-bold">{{phiVanChuyen | number}} ƒë</div>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-4">
            <div class="card shadow-sm p-3">
                <h5 class="mb-3">ƒê∆°n h√†ng</h5>
                <div class="mb-3" style="max-height: 250px; overflow-y: auto;">
                    <div class="d-flex align-items-center mb-2" ng-repeat="item in cart">
                        <img ng-src="http://localhost:8084/uploads/{{item.img}}" width="50" height="50"
                             class="rounded me-2" style="object-fit: cover;">
                        <div class="flex-grow-1">
                            <div>{{item.tenSP}}</div>
                            <small>S·ªë l∆∞·ª£ng: {{item.soLuong}}</small>
                        </div>
                        <div class="fw-bold">{{item.gia * item.soLuong | number}} ƒë</div>
                    </div>
                </div>

                <hr>

                <h6>Voucher c√≥ th·ªÉ √°p d·ª•ng</h6>
                <div style="max-height: 120px; overflow-y: auto; border: 1px solid #ddd; padding: 5px;">
                    <div ng-repeat="v in vouchers" class="p-2 mb-1 bg-light rounded">
                        <input type="radio" ng-click="chonVoucher(v)"
                               ng-checked="voucherSelected && voucherSelected.idVoucher === v.idVoucher">
                        {{v.ten}} - {{v.ma}}
                    </div>
                </div>

                <div class="d-flex justify-content-between mt-2">
                    <span>T·ªïng ti·ªÅn sau gi·∫£m:</span>
                    <span class="fw-bold text-danger">{{tongSauGiam() | number}} ƒë</span>
                </div>

                <hr>

                <div class="d-flex justify-content-between mb-2">
                    <span>T·ªïng ti·ªÅn s·∫£n ph·∫©m:</span>
                    <span class="fw-bold">{{tongTien | number}} ƒë</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                    <span>Gi·∫£m gi√° voucher:</span>
                    <span class="fw-bold text-success">{{tienDuocGiam() | number}} ƒë</span>
                </div>

                <div class="d-flex justify-content-between mb-2">
                    <span>Ph√≠ v·∫≠n chuy·ªÉn:</span>
                    <span class="fw-bold">{{phiVanChuyen | number}} ƒë</span>
                </div>
                <div class="d-flex justify-content-between mb-2 fs-5 fw-bold">
                    <span>Thanh to√°n:</span>
                    <span class="fw-bold text-danger">{{tongSauGiam() | number}} ƒë</span>
                </div>

                <button class="btn btn-danger w-100" ng-click="moModalThanhToan()">
                    Thanh to√°n
                </button>

                <!-- Modal -->
                <div class="modal fade" id="paymentModal" tabindex="-1">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">

                            <div class="modal-header">
                                <h5 class="modal-title">Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>

                            <div class="modal-body">
                                <div class="form-check mb-3">
                                    <input class="form-check-input"
                                           type="radio"
                                           ng-model="phuongThucThanhToan"
                                           value="COD"
                                           id="cod">
                                    <label class="form-check-label" for="cod">
                                        Thanh to√°n khi nh·∫≠n h√†ng (COD)
                                    </label>
                                </div>

                                <div class="form-check">
                                    <input class="form-check-input"
                                           type="radio"
                                           ng-model="phuongThucThanhToan"
                                           value="VNPAY"
                                           id="vnpay">
                                    <label class="form-check-label" for="vnpay">
                                        Thanh to√°n VNPay
                                    </label>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button class="btn btn-secondary" data-bs-dismiss="modal">
                                    Hu·ª∑
                                </button>
                                <button class="btn btn-primary" ng-click="xacNhanThanhToan()">
                                    X√°c nh·∫≠n
                                </button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
